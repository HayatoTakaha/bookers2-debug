{"filter":false,"title":"posts.js","tooltip":"/OurWarmTown/app/javascript/packs/posts.js","undoManager":{"mark":19,"position":19,"stack":[[{"start":{"row":0,"column":0},"end":{"row":16,"column":0},"action":"insert","lines":["document.addEventListener(\"DOMContentLoaded\", function() {","  document.querySelectorAll('.like-link').forEach(function(likeLink) {","    likeLink.addEventListener(\"ajax:success\", function(event) {","      const [data, status, xhr] = event.detail;","      const postId = likeLink.id.split('-')[2];","      const likeIcon = document.querySelector(`#like-icon-${postId}`);","      const likesCount = document.querySelector(`#likes-count-${postId}`);","      if (data.liked) {","        likeIcon.style.color = \"red\";","      } else {","        likeIcon.style.color = \"black\";","      }","      likesCount.innerText = data.likes_count;","    });","  });","});",""],"id":1}],[{"start":{"row":0,"column":0},"end":{"row":16,"column":0},"action":"remove","lines":["document.addEventListener(\"DOMContentLoaded\", function() {","  document.querySelectorAll('.like-link').forEach(function(likeLink) {","    likeLink.addEventListener(\"ajax:success\", function(event) {","      const [data, status, xhr] = event.detail;","      const postId = likeLink.id.split('-')[2];","      const likeIcon = document.querySelector(`#like-icon-${postId}`);","      const likesCount = document.querySelector(`#likes-count-${postId}`);","      if (data.liked) {","        likeIcon.style.color = \"red\";","      } else {","        likeIcon.style.color = \"black\";","      }","      likesCount.innerText = data.likes_count;","    });","  });","});",""],"id":2}],[{"start":{"row":0,"column":0},"end":{"row":44,"column":0},"action":"insert","lines":["document.addEventListener(\"DOMContentLoaded\", function() {","  document.querySelectorAll('.like-link').forEach(function(likeLink) {","    likeLink.addEventListener(\"ajax:success\", function(event) {","      const [data, status, xhr] = event.detail;","      const postId = likeLink.id.split('-')[2];","      const likeIcon = document.querySelector(`#like-icon-${postId}`);","      const likesCount = document.querySelector(`#likes-count-${postId}`);","      if (data.liked) {","        likeIcon.style.color = \"red\";","      } else {","        likeIcon.style.color = \"black\";","      }","      likesCount.innerText = data.likes_count;","    });","  });","","  var commentText = document.getElementById(\"comment-text\");","  var comments = document.getElementById(\"comments\");","","  commentText.addEventListener(\"click\", function() {","    comments.style.display = comments.style.display === \"none\" ? \"block\" : \"none\";","  });","","  var commentForm = document.getElementById(\"comment-form\");","  commentForm.addEventListener(\"submit\", function(event) {","    event.preventDefault();","    var formData = new FormData(commentForm);","    fetch(commentForm.action, {","      method: \"POST\",","      headers: {","        \"X-CSRF-Token\": document.querySelector('meta[name=\"csrf-token\"]').content,","        \"Accept\": \"application/json\"","      },","      body: formData","    }).then(response => response.json()).then(data => {","      if (data.success) {","        var newComment = document.createElement(\"div\");","        newComment.classList.add(\"d-flex\", \"justify-content-between\", \"align-items-center\");","        newComment.innerHTML = `<p class=\"mb-1\"><strong>${data.user_name}:</strong> ${data.content}</p>`;","        if (data.user_id == <%= current_user.id %>) {","          var deleteButton = document.createElement(\"a\");","          deleteButton.href = `/posts/${data.post_id}/comments/${data.comment_id}`;","          deleteButton.classList.add(\"btn\", \"btn-danger\", \"btn-sm\", \"ml-2\");","          deleteButton",""],"id":3}],[{"start":{"row":44,"column":0},"end":{"row":44,"column":1},"action":"insert","lines":["#"],"id":4}],[{"start":{"row":44,"column":0},"end":{"row":44,"column":1},"action":"remove","lines":["#"],"id":5}],[{"start":{"row":0,"column":0},"end":{"row":44,"column":0},"action":"remove","lines":["document.addEventListener(\"DOMContentLoaded\", function() {","  document.querySelectorAll('.like-link').forEach(function(likeLink) {","    likeLink.addEventListener(\"ajax:success\", function(event) {","      const [data, status, xhr] = event.detail;","      const postId = likeLink.id.split('-')[2];","      const likeIcon = document.querySelector(`#like-icon-${postId}`);","      const likesCount = document.querySelector(`#likes-count-${postId}`);","      if (data.liked) {","        likeIcon.style.color = \"red\";","      } else {","        likeIcon.style.color = \"black\";","      }","      likesCount.innerText = data.likes_count;","    });","  });","","  var commentText = document.getElementById(\"comment-text\");","  var comments = document.getElementById(\"comments\");","","  commentText.addEventListener(\"click\", function() {","    comments.style.display = comments.style.display === \"none\" ? \"block\" : \"none\";","  });","","  var commentForm = document.getElementById(\"comment-form\");","  commentForm.addEventListener(\"submit\", function(event) {","    event.preventDefault();","    var formData = new FormData(commentForm);","    fetch(commentForm.action, {","      method: \"POST\",","      headers: {","        \"X-CSRF-Token\": document.querySelector('meta[name=\"csrf-token\"]').content,","        \"Accept\": \"application/json\"","      },","      body: formData","    }).then(response => response.json()).then(data => {","      if (data.success) {","        var newComment = document.createElement(\"div\");","        newComment.classList.add(\"d-flex\", \"justify-content-between\", \"align-items-center\");","        newComment.innerHTML = `<p class=\"mb-1\"><strong>${data.user_name}:</strong> ${data.content}</p>`;","        if (data.user_id == <%= current_user.id %>) {","          var deleteButton = document.createElement(\"a\");","          deleteButton.href = `/posts/${data.post_id}/comments/${data.comment_id}`;","          deleteButton.classList.add(\"btn\", \"btn-danger\", \"btn-sm\", \"ml-2\");","          deleteButton",""],"id":6}],[{"start":{"row":0,"column":0},"end":{"row":53,"column":0},"action":"insert","lines":["document.addEventListener(\"DOMContentLoaded\", function() {","  document.querySelectorAll('.like-link').forEach(function(likeLink) {","    likeLink.addEventListener(\"ajax:success\", function(event) {","      const [data, status, xhr] = event.detail;","      const postId = likeLink.id.split('-')[2];","      const likeIcon = document.querySelector(`#like-icon-${postId}`);","      const likesCount = document.querySelector(`#likes-count-${postId}`);","      if (data.liked) {","        likeIcon.style.color = \"red\";","      } else {","        likeIcon.style.color = \"black\";","      }","      likesCount.innerText = data.likes_count;","    });","  });","","  var commentText = document.getElementById(\"comment-text\");","  var comments = document.getElementById(\"comments\");","","  commentText.addEventListener(\"click\", function() {","    comments.style.display = comments.style.display === \"none\" ? \"block\" : \"none\";","  });","","  var commentForm = document.getElementById(\"comment-form\");","  commentForm.addEventListener(\"submit\", function(event) {","    event.preventDefault();","    var formData = new FormData(commentForm);","    fetch(commentForm.action, {","      method: \"POST\",","      headers: {","        \"X-CSRF-Token\": document.querySelector('meta[name=\"csrf-token\"]').content,","        \"Accept\": \"application/json\"","      },","      body: formData","    }).then(response => response.json()).then(data => {","      if (data.success) {","        var newComment = document.createElement(\"div\");","        newComment.classList.add(\"d-flex\", \"justify-content-between\", \"align-items-center\");","        newComment.innerHTML = `<p class=\"mb-1\"><strong>${data.user_name}:</strong> ${data.content}</p>`;","        if (data.user_id == <%= current_user.id %>) {","          var deleteButton = document.createElement(\"a\");","          deleteButton.href = `/posts/${data.post_id}/comments/${data.comment_id}`;","          deleteButton.classList.add(\"btn\", \"btn-danger\", \"btn-sm\", \"ml-2\");","          deleteButton.innerText = \"削除\";","          deleteButton.setAttribute(\"data-method\", \"delete\");","          newComment.appendChild(deleteButton);","        }","        comments.insertBefore(newComment, commentForm);","        commentForm.reset();","      }","    });","  });","});",""],"id":7}],[{"start":{"row":0,"column":0},"end":{"row":53,"column":0},"action":"remove","lines":["document.addEventListener(\"DOMContentLoaded\", function() {","  document.querySelectorAll('.like-link').forEach(function(likeLink) {","    likeLink.addEventListener(\"ajax:success\", function(event) {","      const [data, status, xhr] = event.detail;","      const postId = likeLink.id.split('-')[2];","      const likeIcon = document.querySelector(`#like-icon-${postId}`);","      const likesCount = document.querySelector(`#likes-count-${postId}`);","      if (data.liked) {","        likeIcon.style.color = \"red\";","      } else {","        likeIcon.style.color = \"black\";","      }","      likesCount.innerText = data.likes_count;","    });","  });","","  var commentText = document.getElementById(\"comment-text\");","  var comments = document.getElementById(\"comments\");","","  commentText.addEventListener(\"click\", function() {","    comments.style.display = comments.style.display === \"none\" ? \"block\" : \"none\";","  });","","  var commentForm = document.getElementById(\"comment-form\");","  commentForm.addEventListener(\"submit\", function(event) {","    event.preventDefault();","    var formData = new FormData(commentForm);","    fetch(commentForm.action, {","      method: \"POST\",","      headers: {","        \"X-CSRF-Token\": document.querySelector('meta[name=\"csrf-token\"]').content,","        \"Accept\": \"application/json\"","      },","      body: formData","    }).then(response => response.json()).then(data => {","      if (data.success) {","        var newComment = document.createElement(\"div\");","        newComment.classList.add(\"d-flex\", \"justify-content-between\", \"align-items-center\");","        newComment.innerHTML = `<p class=\"mb-1\"><strong>${data.user_name}:</strong> ${data.content}</p>`;","        if (data.user_id == <%= current_user.id %>) {","          var deleteButton = document.createElement(\"a\");","          deleteButton.href = `/posts/${data.post_id}/comments/${data.comment_id}`;","          deleteButton.classList.add(\"btn\", \"btn-danger\", \"btn-sm\", \"ml-2\");","          deleteButton.innerText = \"削除\";","          deleteButton.setAttribute(\"data-method\", \"delete\");","          newComment.appendChild(deleteButton);","        }","        comments.insertBefore(newComment, commentForm);","        commentForm.reset();","      }","    });","  });","});",""],"id":8}],[{"start":{"row":0,"column":0},"end":{"row":53,"column":0},"action":"insert","lines":["document.addEventListener(\"DOMContentLoaded\", function() {","  document.querySelectorAll('.like-link').forEach(function(likeLink) {","    likeLink.addEventListener(\"ajax:success\", function(event) {","      const [data, status, xhr] = event.detail;","      const postId = likeLink.id.split('-')[2];","      const likeIcon = document.querySelector(`#like-icon-${postId}`);","      const likesCount = document.querySelector(`#likes-count-${postId}`);","      if (data.liked) {","        likeIcon.style.color = \"red\";","      } else {","        likeIcon.style.color = \"black\";","      }","      likesCount.innerText = data.likes_count;","    });","  });","","  var commentText = document.getElementById(\"comment-text\");","  var comments = document.getElementById(\"comments\");","","  commentText.addEventListener(\"click\", function() {","    comments.style.display = comments.style.display === \"none\" ? \"block\" : \"none\";","  });","","  var commentForm = document.getElementById(\"comment-form\");","  commentForm.addEventListener(\"submit\", function(event) {","    event.preventDefault();","    var formData = new FormData(commentForm);","    fetch(commentForm.action, {","      method: \"POST\",","      headers: {","        \"X-CSRF-Token\": document.querySelector('meta[name=\"csrf-token\"]').content,","        \"Accept\": \"application/json\"","      },","      body: formData","    }).then(response => response.json()).then(data => {","      if (data.success) {","        var newComment = document.createElement(\"div\");","        newComment.classList.add(\"d-flex\", \"justify-content-between\", \"align-items-center\");","        newComment.innerHTML = `<p class=\"mb-1\"><strong>${data.user_name}:</strong> ${data.content}</p>`;","        if (data.user_id == ${current_user.id}) {","          var deleteButton = document.createElement(\"a\");","          deleteButton.href = `/posts/${data.post_id}/comments/${data.comment_id}`;","          deleteButton.classList.add(\"btn\", \"btn-danger\", \"btn-sm\", \"ml-2\");","          deleteButton.innerText = \"削除\";","          deleteButton.setAttribute(\"data-method\", \"delete\");","          newComment.appendChild(deleteButton);","        }","        comments.insertBefore(newComment, commentForm);","        commentForm.reset();","      }","    });","  });","});",""],"id":9}],[{"start":{"row":0,"column":0},"end":{"row":53,"column":0},"action":"remove","lines":["document.addEventListener(\"DOMContentLoaded\", function() {","  document.querySelectorAll('.like-link').forEach(function(likeLink) {","    likeLink.addEventListener(\"ajax:success\", function(event) {","      const [data, status, xhr] = event.detail;","      const postId = likeLink.id.split('-')[2];","      const likeIcon = document.querySelector(`#like-icon-${postId}`);","      const likesCount = document.querySelector(`#likes-count-${postId}`);","      if (data.liked) {","        likeIcon.style.color = \"red\";","      } else {","        likeIcon.style.color = \"black\";","      }","      likesCount.innerText = data.likes_count;","    });","  });","","  var commentText = document.getElementById(\"comment-text\");","  var comments = document.getElementById(\"comments\");","","  commentText.addEventListener(\"click\", function() {","    comments.style.display = comments.style.display === \"none\" ? \"block\" : \"none\";","  });","","  var commentForm = document.getElementById(\"comment-form\");","  commentForm.addEventListener(\"submit\", function(event) {","    event.preventDefault();","    var formData = new FormData(commentForm);","    fetch(commentForm.action, {","      method: \"POST\",","      headers: {","        \"X-CSRF-Token\": document.querySelector('meta[name=\"csrf-token\"]').content,","        \"Accept\": \"application/json\"","      },","      body: formData","    }).then(response => response.json()).then(data => {","      if (data.success) {","        var newComment = document.createElement(\"div\");","        newComment.classList.add(\"d-flex\", \"justify-content-between\", \"align-items-center\");","        newComment.innerHTML = `<p class=\"mb-1\"><strong>${data.user_name}:</strong> ${data.content}</p>`;","        if (data.user_id == ${current_user.id}) {","          var deleteButton = document.createElement(\"a\");","          deleteButton.href = `/posts/${data.post_id}/comments/${data.comment_id}`;","          deleteButton.classList.add(\"btn\", \"btn-danger\", \"btn-sm\", \"ml-2\");","          deleteButton.innerText = \"削除\";","          deleteButton.setAttribute(\"data-method\", \"delete\");","          newComment.appendChild(deleteButton);","        }","        comments.insertBefore(newComment, commentForm);","        commentForm.reset();","      }","    });","  });","});",""],"id":10}],[{"start":{"row":0,"column":0},"end":{"row":53,"column":0},"action":"insert","lines":["document.addEventListener(\"DOMContentLoaded\", function() {","  document.querySelectorAll('.like-link').forEach(function(likeLink) {","    likeLink.addEventListener(\"ajax:success\", function(event) {","      const [data, status, xhr] = event.detail;","      const postId = likeLink.id.split('-')[2];","      const likeIcon = document.querySelector(`#like-icon-${postId}`);","      const likesCount = document.querySelector(`#likes-count-${postId}`);","      if (data.liked) {","        likeIcon.style.color = \"red\";","      } else {","        likeIcon.style.color = \"black\";","      }","      likesCount.innerText = data.likes_count;","    });","  });","","  var commentText = document.getElementById(\"comment-text\");","  var comments = document.getElementById(\"comments\");","","  commentText.addEventListener(\"click\", function() {","    comments.style.display = comments.style.display === \"none\" ? \"block\" : \"none\";","  });","","  var commentForm = document.getElementById(\"comment-form\");","  commentForm.addEventListener(\"submit\", function(event) {","    event.preventDefault();","    var formData = new FormData(commentForm);","    fetch(commentForm.action, {","      method: \"POST\",","      headers: {","        \"X-CSRF-Token\": document.querySelector('meta[name=\"csrf-token\"]').content,","        \"Accept\": \"application/json\"","      },","      body: formData","    }).then(response => response.json()).then(data => {","      if (data.success) {","        var newComment = document.createElement(\"div\");","        newComment.classList.add(\"d-flex\", \"justify-content-between\", \"align-items-center\");","        newComment.innerHTML = `<p class=\"mb-1\"><strong>${data.user_name}:</strong> ${data.content}</p>`;","        if (data.user_id == ${current_user.id}) {","          var deleteButton = document.createElement(\"a\");","          deleteButton.href = `/posts/${data.post_id}/comments/${data.comment_id}`;","          deleteButton.classList.add(\"btn\", \"btn-danger\", \"btn-sm\", \"ml-2\");","          deleteButton.innerText = \"削除\";","          deleteButton.setAttribute(\"data-method\", \"delete\");","          newComment.appendChild(deleteButton);","        }","        comments.insertBefore(newComment, commentForm);","        commentForm.reset();","      }","    });","  });","});",""],"id":11}],[{"start":{"row":0,"column":0},"end":{"row":53,"column":0},"action":"remove","lines":["document.addEventListener(\"DOMContentLoaded\", function() {","  document.querySelectorAll('.like-link').forEach(function(likeLink) {","    likeLink.addEventListener(\"ajax:success\", function(event) {","      const [data, status, xhr] = event.detail;","      const postId = likeLink.id.split('-')[2];","      const likeIcon = document.querySelector(`#like-icon-${postId}`);","      const likesCount = document.querySelector(`#likes-count-${postId}`);","      if (data.liked) {","        likeIcon.style.color = \"red\";","      } else {","        likeIcon.style.color = \"black\";","      }","      likesCount.innerText = data.likes_count;","    });","  });","","  var commentText = document.getElementById(\"comment-text\");","  var comments = document.getElementById(\"comments\");","","  commentText.addEventListener(\"click\", function() {","    comments.style.display = comments.style.display === \"none\" ? \"block\" : \"none\";","  });","","  var commentForm = document.getElementById(\"comment-form\");","  commentForm.addEventListener(\"submit\", function(event) {","    event.preventDefault();","    var formData = new FormData(commentForm);","    fetch(commentForm.action, {","      method: \"POST\",","      headers: {","        \"X-CSRF-Token\": document.querySelector('meta[name=\"csrf-token\"]').content,","        \"Accept\": \"application/json\"","      },","      body: formData","    }).then(response => response.json()).then(data => {","      if (data.success) {","        var newComment = document.createElement(\"div\");","        newComment.classList.add(\"d-flex\", \"justify-content-between\", \"align-items-center\");","        newComment.innerHTML = `<p class=\"mb-1\"><strong>${data.user_name}:</strong> ${data.content}</p>`;","        if (data.user_id == ${current_user.id}) {","          var deleteButton = document.createElement(\"a\");","          deleteButton.href = `/posts/${data.post_id}/comments/${data.comment_id}`;","          deleteButton.classList.add(\"btn\", \"btn-danger\", \"btn-sm\", \"ml-2\");","          deleteButton.innerText = \"削除\";","          deleteButton.setAttribute(\"data-method\", \"delete\");","          newComment.appendChild(deleteButton);","        }","        comments.insertBefore(newComment, commentForm);","        commentForm.reset();","      }","    });","  });","});",""],"id":12}],[{"start":{"row":0,"column":0},"end":{"row":62,"column":0},"action":"insert","lines":["document.addEventListener(\"DOMContentLoaded\", function() {","  var likeIcon = document.getElementById(\"like-icon\");","  var likesCount = document.getElementById(\"likes-count\");","  var likeText = document.getElementById(\"like-text\");","","  likeIcon.addEventListener(\"click\", function(event) {","    event.preventDefault();","    fetch(\"<%= toggle_like_post_path(@post) %>\", {","      method: \"POST\",","      headers: {","        \"X-CSRF-Token\": document.querySelector(\"meta[name='csrf-token']\").content,","        \"Content-Type\": \"application/json\"","      }","    }).then(response => response.json()).then(data => {","      if (data.liked) {","        likeIcon.style.color = \"red\";","        likeText.innerText = \"いいねを取り消す\";","      } else {","        likeIcon.style.color = \"black\";","        likeText.innerText = \"いいね\";","      }","      likesCount.innerText = data.likes_count;","    });","  });","","  var commentText = document.getElementById(\"comment-text\");","  var comments = document.getElementById(\"comments\");","","  commentText.addEventListener(\"click\", function() {","    comments.style.display = comments.style.display === \"none\" ? \"block\" : \"none\";","  });","","  var commentForm = document.getElementById(\"comment-form\");","  commentForm.addEventListener(\"submit\", function(event) {","    event.preventDefault();","    var formData = new FormData(commentForm);","    fetch(commentForm.action, {","      method: \"POST\",","      headers: {","        \"X-CSRF-Token\": document.querySelector(\"meta[name='csrf-token']\").content,","        \"Accept\": \"application/json\"","      },","      body: formData","    }).then(response => response.json()).then(data => {","      if (data.success) {","        var newComment = document.createElement(\"div\");","        newComment.classList.add(\"d-flex\", \"justify-content-between\", \"align-items-center\");","        newComment.innerHTML = `<p class=\"mb-1\"><strong>${data.user_name}:</strong> ${data.content}</p>`;","        if (data.user_id === <%= current_user.id %>) {","          var deleteButton = document.createElement(\"a\");","          deleteButton.href = `/posts/${data.post_id}/comments/${data.comment_id}`;","          deleteButton.classList.add(\"btn\", \"btn-danger\", \"btn-sm\", \"ml-2\");","          deleteButton.innerText = \"削除\";","          deleteButton.setAttribute(\"data-method\", \"delete\");","          newComment.appendChild(deleteButton);","        }","        comments.insertBefore(newComment, commentForm);","        commentForm.reset();","      }","    });","  });","});",""],"id":13}],[{"start":{"row":61,"column":3},"end":{"row":62,"column":0},"action":"remove","lines":["",""],"id":16}],[{"start":{"row":0,"column":0},"end":{"row":61,"column":3},"action":"remove","lines":["document.addEventListener(\"DOMContentLoaded\", function() {","  var likeIcon = document.getElementById(\"like-icon\");","  var likesCount = document.getElementById(\"likes-count\");","  var likeText = document.getElementById(\"like-text\");","","  likeIcon.addEventListener(\"click\", function(event) {","    event.preventDefault();","    fetch(\"<%= toggle_like_post_path(@post) %>\", {","      method: \"POST\",","      headers: {","        \"X-CSRF-Token\": document.querySelector(\"meta[name='csrf-token']\").content,","        \"Content-Type\": \"application/json\"","      }","    }).then(response => response.json()).then(data => {","      if (data.liked) {","        likeIcon.style.color = \"red\";","        likeText.innerText = \"いいねを取り消す\";","      } else {","        likeIcon.style.color = \"black\";","        likeText.innerText = \"いいね\";","      }","      likesCount.innerText = data.likes_count;","    });","  });","","  var commentText = document.getElementById(\"comment-text\");","  var comments = document.getElementById(\"comments\");","","  commentText.addEventListener(\"click\", function() {","    comments.style.display = comments.style.display === \"none\" ? \"block\" : \"none\";","  });","","  var commentForm = document.getElementById(\"comment-form\");","  commentForm.addEventListener(\"submit\", function(event) {","    event.preventDefault();","    var formData = new FormData(commentForm);","    fetch(commentForm.action, {","      method: \"POST\",","      headers: {","        \"X-CSRF-Token\": document.querySelector(\"meta[name='csrf-token']\").content,","        \"Accept\": \"application/json\"","      },","      body: formData","    }).then(response => response.json()).then(data => {","      if (data.success) {","        var newComment = document.createElement(\"div\");","        newComment.classList.add(\"d-flex\", \"justify-content-between\", \"align-items-center\");","        newComment.innerHTML = `<p class=\"mb-1\"><strong>${data.user_name}:</strong> ${data.content}</p>`;","        if (data.user_id === <%= current_user.id %>) {","          var deleteButton = document.createElement(\"a\");","          deleteButton.href = `/posts/${data.post_id}/comments/${data.comment_id}`;","          deleteButton.classList.add(\"btn\", \"btn-danger\", \"btn-sm\", \"ml-2\");","          deleteButton.innerText = \"削除\";","          deleteButton.setAttribute(\"data-method\", \"delete\");","          newComment.appendChild(deleteButton);","        }","        comments.insertBefore(newComment, commentForm);","        commentForm.reset();","      }","    });","  });","});"],"id":17}],[{"start":{"row":0,"column":0},"end":{"row":83,"column":0},"action":"insert","lines":["document.addEventListener(\"DOMContentLoaded\", function() {","  var likeIcon = document.getElementById(\"like-icon\");","  var likesCount = document.getElementById(\"likes-count\");","  var likeText = document.getElementById(\"like-text\");","","  likeIcon.addEventListener(\"click\", function(event) {","    event.preventDefault();","    fetch(\"<%= j toggle_like_post_path(@post) %>\", {","      method: \"POST\",","      headers: {","        \"X-CSRF-Token\": document.querySelector(\"meta[name='csrf-token']\").content,","        \"Content-Type\": \"application/json\",","        \"Accept\": \"application/json\"","      }","    }).then(response => response.json()).then(data => {","      if (data.liked) {","        likeIcon.style.color = \"red\";","        likeText.innerText = \"いいねを取り消す\";","      } else {","        likeIcon.style.color = \"black\";","        likeText.innerText = \"いいね\";","      }","      likesCount.innerText = data.likes_count;","    }).catch(error => {","      console.error('Error:', error);","    });","  });","","  var commentText = document.getElementById(\"comment-text\");","  var comments = document.getElementById(\"comments\");","","  commentText.addEventListener(\"click\", function() {","    comments.style.display = comments.style.display === \"none\" ? \"block\" : \"none\";","  });","","  var commentForm = document.getElementById(\"comment-form\");","  commentForm.addEventListener(\"submit\", function(event) {","    event.preventDefault();","    var formData = new FormData(commentForm);","    fetch(commentForm.action, {","      method: \"POST\",","      headers: {","        \"X-CSRF-Token\": document.querySelector(\"meta[name='csrf-token']\").content,","        \"Accept\": \"application/json\"","      },","      body: formData","    }).then(response => response.json()).then(data => {","      if (data.success) {","        var newComment = document.createElement(\"div\");","        newComment.classList.add(\"d-flex\", \"justify-content-between\", \"align-items-center\");","        newComment.innerHTML = `<p class=\"mb-1\"><strong>${data.user_name}:</strong> ${data.content}</p>`;","        if (data.user_id === <%= current_user.id %>) {","          var deleteButton = document.createElement(\"a\");","          deleteButton.href = `/posts/${data.post_id}/comments/${data.comment_id}`;","          deleteButton.classList.add(\"btn\", \"btn-danger\", \"btn-sm\", \"ml-2\");","          deleteButton.innerText = \"削除\";","          deleteButton.setAttribute(\"data-method\", \"delete\");","          deleteButton.addEventListener(\"click\", function(event) {","            event.preventDefault();","            fetch(deleteButton.href, {","              method: \"DELETE\",","              headers: {","                \"X-CSRF-Token\": document.querySelector(\"meta[name='csrf-token']\").content,","                \"Accept\": \"application/json\"","              }","            }).then(response => response.json()).then(data => {","              if (data.success) {","                newComment.remove();","              }","            }).catch(error => {","              console.error('Error:', error);","            });","          });","          newComment.appendChild(deleteButton);","        }","        comments.insertBefore(newComment, commentForm);","        commentForm.reset();","      }","    }).catch(error => {","      console.error('Error:', error);","    });","  });","});",""],"id":18}],[{"start":{"row":0,"column":0},"end":{"row":83,"column":0},"action":"remove","lines":["document.addEventListener(\"DOMContentLoaded\", function() {","  var likeIcon = document.getElementById(\"like-icon\");","  var likesCount = document.getElementById(\"likes-count\");","  var likeText = document.getElementById(\"like-text\");","","  likeIcon.addEventListener(\"click\", function(event) {","    event.preventDefault();","    fetch(\"<%= j toggle_like_post_path(@post) %>\", {","      method: \"POST\",","      headers: {","        \"X-CSRF-Token\": document.querySelector(\"meta[name='csrf-token']\").content,","        \"Content-Type\": \"application/json\",","        \"Accept\": \"application/json\"","      }","    }).then(response => response.json()).then(data => {","      if (data.liked) {","        likeIcon.style.color = \"red\";","        likeText.innerText = \"いいねを取り消す\";","      } else {","        likeIcon.style.color = \"black\";","        likeText.innerText = \"いいね\";","      }","      likesCount.innerText = data.likes_count;","    }).catch(error => {","      console.error('Error:', error);","    });","  });","","  var commentText = document.getElementById(\"comment-text\");","  var comments = document.getElementById(\"comments\");","","  commentText.addEventListener(\"click\", function() {","    comments.style.display = comments.style.display === \"none\" ? \"block\" : \"none\";","  });","","  var commentForm = document.getElementById(\"comment-form\");","  commentForm.addEventListener(\"submit\", function(event) {","    event.preventDefault();","    var formData = new FormData(commentForm);","    fetch(commentForm.action, {","      method: \"POST\",","      headers: {","        \"X-CSRF-Token\": document.querySelector(\"meta[name='csrf-token']\").content,","        \"Accept\": \"application/json\"","      },","      body: formData","    }).then(response => response.json()).then(data => {","      if (data.success) {","        var newComment = document.createElement(\"div\");","        newComment.classList.add(\"d-flex\", \"justify-content-between\", \"align-items-center\");","        newComment.innerHTML = `<p class=\"mb-1\"><strong>${data.user_name}:</strong> ${data.content}</p>`;","        if (data.user_id === <%= current_user.id %>) {","          var deleteButton = document.createElement(\"a\");","          deleteButton.href = `/posts/${data.post_id}/comments/${data.comment_id}`;","          deleteButton.classList.add(\"btn\", \"btn-danger\", \"btn-sm\", \"ml-2\");","          deleteButton.innerText = \"削除\";","          deleteButton.setAttribute(\"data-method\", \"delete\");","          deleteButton.addEventListener(\"click\", function(event) {","            event.preventDefault();","            fetch(deleteButton.href, {","              method: \"DELETE\",","              headers: {","                \"X-CSRF-Token\": document.querySelector(\"meta[name='csrf-token']\").content,","                \"Accept\": \"application/json\"","              }","            }).then(response => response.json()).then(data => {","              if (data.success) {","                newComment.remove();","              }","            }).catch(error => {","              console.error('Error:', error);","            });","          });","          newComment.appendChild(deleteButton);","        }","        comments.insertBefore(newComment, commentForm);","        commentForm.reset();","      }","    }).catch(error => {","      console.error('Error:', error);","    });","  });","});",""],"id":19}],[{"start":{"row":0,"column":0},"end":{"row":52,"column":0},"action":"insert","lines":["document.addEventListener(\"DOMContentLoaded\", function() {","  var commentForm = document.getElementById(\"comment-form\");","  var postComments = document.getElementById(\"post-comments\");","  var currentUserId = postComments.dataset.userId; // データ属性からユーザーIDを取得","","  commentForm.addEventListener(\"submit\", function(event) {","    event.preventDefault();","","    var formData = new FormData(commentForm);","    var postId = commentForm.dataset.postId;","","    fetch(`/posts/${postId}/comments`, {","      method: \"POST\",","      headers: {","        \"X-CSRF-Token\": document.querySelector(\"meta[name='csrf-token']\").content","      },","      body: formData","    })","    .then(response => response.json())","    .then(data => {","      var newComment = document.createElement(\"div\");","      newComment.classList.add(\"d-flex\", \"justify-content-between\", \"align-items-center\");","      newComment.innerHTML = `<p class=\"mb-1\"><strong>${data.user_name}:</strong> ${data.content}</p>`;","","      if (data.user_id == currentUserId) { // データ属性のユーザーIDと比較","        var deleteButton = document.createElement(\"a\");","        deleteButton.href = `/posts/${data.post_id}/comments/${data.comment_id}`;","        deleteButton.classList.add(\"btn\", \"btn-danger\", \"btn-sm\", \"ml-2\");","        deleteButton.innerText = \"削除\";","        deleteButton.addEventListener(\"click\", function(event) {","          event.preventDefault();","          fetch(deleteButton.href, {","            method: \"DELETE\",","            headers: {","              \"X-CSRF-Token\": document.querySelector(\"meta[name='csrf-token']\").content","            }","          })","          .then(response => response.json())","          .then(data => {","            if (data.success) {","              newComment.remove();","            }","          });","        });","        newComment.appendChild(deleteButton);","      }","","      postComments.appendChild(newComment);","    })","    .catch(error => console.error(\"エラー:\", error));","  });","});",""],"id":20}],[{"start":{"row":0,"column":0},"end":{"row":52,"column":0},"action":"remove","lines":["document.addEventListener(\"DOMContentLoaded\", function() {","  var commentForm = document.getElementById(\"comment-form\");","  var postComments = document.getElementById(\"post-comments\");","  var currentUserId = postComments.dataset.userId; // データ属性からユーザーIDを取得","","  commentForm.addEventListener(\"submit\", function(event) {","    event.preventDefault();","","    var formData = new FormData(commentForm);","    var postId = commentForm.dataset.postId;","","    fetch(`/posts/${postId}/comments`, {","      method: \"POST\",","      headers: {","        \"X-CSRF-Token\": document.querySelector(\"meta[name='csrf-token']\").content","      },","      body: formData","    })","    .then(response => response.json())","    .then(data => {","      var newComment = document.createElement(\"div\");","      newComment.classList.add(\"d-flex\", \"justify-content-between\", \"align-items-center\");","      newComment.innerHTML = `<p class=\"mb-1\"><strong>${data.user_name}:</strong> ${data.content}</p>`;","","      if (data.user_id == currentUserId) { // データ属性のユーザーIDと比較","        var deleteButton = document.createElement(\"a\");","        deleteButton.href = `/posts/${data.post_id}/comments/${data.comment_id}`;","        deleteButton.classList.add(\"btn\", \"btn-danger\", \"btn-sm\", \"ml-2\");","        deleteButton.innerText = \"削除\";","        deleteButton.addEventListener(\"click\", function(event) {","          event.preventDefault();","          fetch(deleteButton.href, {","            method: \"DELETE\",","            headers: {","              \"X-CSRF-Token\": document.querySelector(\"meta[name='csrf-token']\").content","            }","          })","          .then(response => response.json())","          .then(data => {","            if (data.success) {","              newComment.remove();","            }","          });","        });","        newComment.appendChild(deleteButton);","      }","","      postComments.appendChild(newComment);","    })","    .catch(error => console.error(\"エラー:\", error));","  });","});",""],"id":21}],[{"start":{"row":0,"column":0},"end":{"row":28,"column":0},"action":"insert","lines":["document.addEventListener(\"DOMContentLoaded\", function() {","  var likeLinks = document.querySelectorAll(\"[id^='like-link-']\");","","  likeLinks.forEach(function(likeLink) {","    likeLink.addEventListener(\"click\", function(event) {","      event.preventDefault();","","      var postId = likeLink.id.split(\"-\")[2];","      var likeIcon = document.getElementById(`like-icon-${postId}`);","      var likesCount = document.getElementById(`likes-count-${postId}`);","","      fetch(likeLink.href, {","        method: \"POST\",","        headers: {","          \"X-CSRF-Token\": document.querySelector(\"meta[name='csrf-token']\").content,","          \"Content-Type\": \"application/json\"","        }","      }).then(response => response.json()).then(data => {","        if (data.liked) {","          likeIcon.style.color = \"red\";","        } else {","          likeIcon.style.color = \"black\";","        }","        likesCount.innerText = data.likes_count;","      });","    });","  });","});",""],"id":22}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":28,"column":0},"end":{"row":28,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1718940023819,"hash":"41589f4aa181ac477362c2b58f19bd9c97785e06"}