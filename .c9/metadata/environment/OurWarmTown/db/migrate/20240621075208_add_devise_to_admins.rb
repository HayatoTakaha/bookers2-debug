{"filter":false,"title":"20240621075208_add_devise_to_admins.rb","tooltip":"/OurWarmTown/db/migrate/20240621075208_add_devise_to_admins.rb","undoManager":{"mark":9,"position":9,"stack":[[{"start":{"row":0,"column":0},"end":{"row":51,"column":0},"action":"remove","lines":["# frozen_string_literal: true","","class AddDeviseToAdmins < ActiveRecord::Migration[6.1]","  def self.up","    change_table :admins do |t|","      ## Database authenticatable","      t.string :email,              null: false, default: \"\"","      t.string :encrypted_password, null: false, default: \"\"","","      ## Recoverable","      t.string   :reset_password_token","      t.datetime :reset_password_sent_at","","      ## Rememberable","      t.datetime :remember_created_at","","      ## Trackable","      # t.integer  :sign_in_count, default: 0, null: false","      # t.datetime :current_sign_in_at","      # t.datetime :last_sign_in_at","      # t.string   :current_sign_in_ip","      # t.string   :last_sign_in_ip","","      ## Confirmable","      # t.string   :confirmation_token","      # t.datetime :confirmed_at","      # t.datetime :confirmation_sent_at","      # t.string   :unconfirmed_email # Only if using reconfirmable","","      ## Lockable","      # t.integer  :failed_attempts, default: 0, null: false # Only if lock strategy is :failed_attempts","      # t.string   :unlock_token # Only if unlock strategy is :email or :both","      # t.datetime :locked_at","","","      # Uncomment below if timestamps were not included in your original model.","      # t.timestamps null: false","    end","","    add_index :admins, :email,                unique: true","    add_index :admins, :reset_password_token, unique: true","    # add_index :admins, :confirmation_token,   unique: true","    # add_index :admins, :unlock_token,         unique: true","  end","","  def self.down","    # By default, we don't want to make any assumption about how to roll back a migration when your","    # model already existed. Please edit below which fields you would like to remove in this migration.","    raise ActiveRecord::IrreversibleMigration","  end","end",""],"id":2}],[{"start":{"row":0,"column":0},"end":{"row":37,"column":0},"action":"insert","lines":["class AddDeviseToAdmins < ActiveRecord::Migration[6.1]","  def self.up","    change_table :admins do |t|","      ## Devise Columns","      # t.string :email,              null: false, default: \"\"  # 既に存在するためコメントアウト","      t.string :encrypted_password, null: false, default: \"\"","","      ## Recoverable","      t.string   :reset_password_token","      t.datetime :reset_password_sent_at","","      ## Rememberable","      t.datetime :remember_created_at","","      ## Trackable","      t.integer  :sign_in_count, default: 0, null: false","      t.datetime :current_sign_in_at","      t.datetime :last_sign_in_at","      t.string   :current_sign_in_ip","      t.string   :last_sign_in_ip","","      # Uncomment below if timestamps were not included in your original model.","      # t.timestamps null: false","    end","","    add_index :admins, :email,                unique: true","    add_index :admins, :reset_password_token, unique: true","    # add_index :admins, :confirmation_token,   unique: true","    # add_index :admins, :unlock_token,         unique: true","  end","","  def self.down","    # By default, we don't want to make any assumption about how to roll back a migration when your","    # model already existed. Please edit below which fields you would like to remove in this migration.","    raise ActiveRecord::IrreversibleMigration","  end","end",""],"id":3}],[{"start":{"row":0,"column":0},"end":{"row":37,"column":0},"action":"remove","lines":["class AddDeviseToAdmins < ActiveRecord::Migration[6.1]","  def self.up","    change_table :admins do |t|","      ## Devise Columns","      # t.string :email,              null: false, default: \"\"  # 既に存在するためコメントアウト","      t.string :encrypted_password, null: false, default: \"\"","","      ## Recoverable","      t.string   :reset_password_token","      t.datetime :reset_password_sent_at","","      ## Rememberable","      t.datetime :remember_created_at","","      ## Trackable","      t.integer  :sign_in_count, default: 0, null: false","      t.datetime :current_sign_in_at","      t.datetime :last_sign_in_at","      t.string   :current_sign_in_ip","      t.string   :last_sign_in_ip","","      # Uncomment below if timestamps were not included in your original model.","      # t.timestamps null: false","    end","","    add_index :admins, :email,                unique: true","    add_index :admins, :reset_password_token, unique: true","    # add_index :admins, :confirmation_token,   unique: true","    # add_index :admins, :unlock_token,         unique: true","  end","","  def self.down","    # By default, we don't want to make any assumption about how to roll back a migration when your","    # model already existed. Please edit below which fields you would like to remove in this migration.","    raise ActiveRecord::IrreversibleMigration","  end","end",""],"id":4}],[{"start":{"row":0,"column":0},"end":{"row":41,"column":0},"action":"insert","lines":["class AddDeviseToAdmins < ActiveRecord::Migration[6.1]","  def self.up","    change_table :admins do |t|","      ## Database authenticatable","      t.string :email,              null: false, default: \"\"","      t.string :encrypted_password, null: false, default: \"\"","","      ## Recoverable","      t.string   :reset_password_token","      t.datetime :reset_password_sent_at","","      ## Rememberable","      t.datetime :remember_created_at","","      ## Trackable","      t.integer  :sign_in_count, default: 0, null: false","      t.datetime :current_sign_in_at","      t.datetime :last_sign_in_at","      t.string   :current_sign_in_ip","      t.string   :last_sign_in_ip","","      # Uncomment below if timestamps were not included in your original model.","      # t.timestamps null: false","    end","","    # Only add the index if it doesn't exist","    add_index :admins, :email, unique: true unless index_exists?(:admins, :email)","    add_index :admins, :reset_password_token, unique: true","  end","","  def self.down","    # If you want to rollback the migration, drop indexes and remove columns","    remove_index :admins, :email if index_exists?(:admins, :email)","    remove_index :admins, :reset_password_token if index_exists?(:admins, :reset_password_token)","","    change_table :admins do |t|","      t.remove :email, :encrypted_password, :reset_password_token, :reset_password_sent_at, :remember_created_at,","               :sign_in_count, :current_sign_in_at, :last_sign_in_at, :current_sign_in_ip, :last_sign_in_ip","    end","  end","end",""],"id":5}],[{"start":{"row":0,"column":0},"end":{"row":41,"column":0},"action":"remove","lines":["class AddDeviseToAdmins < ActiveRecord::Migration[6.1]","  def self.up","    change_table :admins do |t|","      ## Database authenticatable","      t.string :email,              null: false, default: \"\"","      t.string :encrypted_password, null: false, default: \"\"","","      ## Recoverable","      t.string   :reset_password_token","      t.datetime :reset_password_sent_at","","      ## Rememberable","      t.datetime :remember_created_at","","      ## Trackable","      t.integer  :sign_in_count, default: 0, null: false","      t.datetime :current_sign_in_at","      t.datetime :last_sign_in_at","      t.string   :current_sign_in_ip","      t.string   :last_sign_in_ip","","      # Uncomment below if timestamps were not included in your original model.","      # t.timestamps null: false","    end","","    # Only add the index if it doesn't exist","    add_index :admins, :email, unique: true unless index_exists?(:admins, :email)","    add_index :admins, :reset_password_token, unique: true","  end","","  def self.down","    # If you want to rollback the migration, drop indexes and remove columns","    remove_index :admins, :email if index_exists?(:admins, :email)","    remove_index :admins, :reset_password_token if index_exists?(:admins, :reset_password_token)","","    change_table :admins do |t|","      t.remove :email, :encrypted_password, :reset_password_token, :reset_password_sent_at, :remember_created_at,","               :sign_in_count, :current_sign_in_at, :last_sign_in_at, :current_sign_in_ip, :last_sign_in_ip","    end","  end","end",""],"id":6}],[{"start":{"row":0,"column":0},"end":{"row":24,"column":0},"action":"insert","lines":["class AddDeviseToAdmins < ActiveRecord::Migration[6.1]","  def change","    change_table :admins, bulk: true do |t|","      ## Database authenticatable","      t.string :encrypted_password, null: false, default: \"\"","      ","      ## Recoverable","      t.string   :reset_password_token","      t.datetime :reset_password_sent_at","","      ## Rememberable","      t.datetime :remember_created_at","","      ## Trackable","      t.integer  :sign_in_count, default: 0, null: false","      t.datetime :current_sign_in_at","      t.datetime :last_sign_in_at","      t.string   :current_sign_in_ip","      t.string   :last_sign_in_ip","    end","","    add_index :admins, :reset_password_token, unique: true","  end","end",""],"id":7}],[{"start":{"row":0,"column":0},"end":{"row":24,"column":0},"action":"remove","lines":["class AddDeviseToAdmins < ActiveRecord::Migration[6.1]","  def change","    change_table :admins, bulk: true do |t|","      ## Database authenticatable","      t.string :encrypted_password, null: false, default: \"\"","      ","      ## Recoverable","      t.string   :reset_password_token","      t.datetime :reset_password_sent_at","","      ## Rememberable","      t.datetime :remember_created_at","","      ## Trackable","      t.integer  :sign_in_count, default: 0, null: false","      t.datetime :current_sign_in_at","      t.datetime :last_sign_in_at","      t.string   :current_sign_in_ip","      t.string   :last_sign_in_ip","    end","","    add_index :admins, :reset_password_token, unique: true","  end","end",""],"id":8}],[{"start":{"row":0,"column":0},"end":{"row":24,"column":0},"action":"insert","lines":["class AddDeviseToAdmins < ActiveRecord::Migration[6.1]","  def change","    change_table :admins, bulk: true do |t|","      ## Database authenticatable","      t.string :encrypted_password, null: false, default: \"\"","      ","      ## Recoverable","      t.string   :reset_password_token","      t.datetime :reset_password_sent_at","","      ## Rememberable","      t.datetime :remember_created_at","","      ## Trackable","      t.integer  :sign_in_count, default: 0, null: false","      t.datetime :current_sign_in_at","      t.datetime :last_sign_in_at","      t.string   :current_sign_in_ip","      t.string   :last_sign_in_ip","    end","","    add_index :admins, :reset_password_token, unique: true","  end","end",""],"id":9}],[{"start":{"row":0,"column":0},"end":{"row":24,"column":0},"action":"remove","lines":["class AddDeviseToAdmins < ActiveRecord::Migration[6.1]","  def change","    change_table :admins, bulk: true do |t|","      ## Database authenticatable","      t.string :encrypted_password, null: false, default: \"\"","      ","      ## Recoverable","      t.string   :reset_password_token","      t.datetime :reset_password_sent_at","","      ## Rememberable","      t.datetime :remember_created_at","","      ## Trackable","      t.integer  :sign_in_count, default: 0, null: false","      t.datetime :current_sign_in_at","      t.datetime :last_sign_in_at","      t.string   :current_sign_in_ip","      t.string   :last_sign_in_ip","    end","","    add_index :admins, :reset_password_token, unique: true","  end","end",""],"id":10}],[{"start":{"row":0,"column":0},"end":{"row":24,"column":0},"action":"insert","lines":["class AddDeviseToAdmins < ActiveRecord::Migration[6.1]","  def change","    change_table :admins, bulk: true do |t|","      ## Database authenticatable","      t.string :encrypted_password, null: false, default: \"\"","      ","      ## Recoverable","      t.string   :reset_password_token","      t.datetime :reset_password_sent_at","","      ## Rememberable","      t.datetime :remember_created_at","","      ## Trackable","      t.integer  :sign_in_count, default: 0, null: false","      t.datetime :current_sign_in_at","      t.datetime :last_sign_in_at","      t.string   :current_sign_in_ip","      t.string   :last_sign_in_ip","    end","","    add_index :admins, :reset_password_token, unique: true","  end","end",""],"id":11}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":24,"column":0},"end":{"row":24,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1718959261433,"hash":"d3075486623ef8d408bdcd9d893b7951a1cf6a5e"}